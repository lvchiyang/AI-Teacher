# Kotlin Agentç³»ç»Ÿå®ç°

## æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†åŸºäºKotlinçš„AI Agentç³»ç»Ÿï¼Œ**å®Œå…¨é‡æ„**ä»¥å¯¹åº”Pythonç‰ˆæœ¬çš„`utils.py`å’Œ`multi_agent_system.py`ï¼Œä¸ºAndroidåº”ç”¨æä¾›AIæ•™å­¦åŠŸèƒ½ã€‚

## æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

1. **BaseAgent** - æ™ºèƒ½ä½“åŸºç¡€ç±»ï¼ˆå®Œå…¨å¯¹åº”Pythonçš„base_agentï¼‰
   - ä½¿ç”¨LLMModelä½œä¸ºæ ¸å¿ƒæ¨ç†æ¨¡å‹
   - æ”¯æŒå¤–å›´å·¥å…·æ³¨å†Œä¸è°ƒç”¨ï¼ˆBaseToolï¼‰
   - å®ç°å•æ¬¡è¿è¡Œå’Œå¾ªç¯è¿è¡Œé€»è¾‘
   - æ”¯æŒçŠ¶æ€æœºç®¡ç†ï¼ˆINITIALIZING, RUNNING, PAUSED, STOPPING, STOPPED, ERRORï¼‰

2. **BaseTool** - åŸºç¡€å·¥å…·ç±»ï¼ˆå®Œå…¨å¯¹åº”Pythonçš„base_toolï¼‰
   - æ”¯æŒå·¥å…·è§„æ ¼å®šä¹‰å’Œè½¬æ¢
   - æä¾›å·¥å…·å‡½æ•°è®¾ç½®å’Œæ‰§è¡Œ
   - æ”¯æŒä»è§„æ ¼åˆ›å»ºå·¥å…·å®ä¾‹

3. **LLMModel** - LLMæ¨¡å‹ç±»ï¼ˆå®Œå…¨å¯¹åº”Pythonçš„llm_modelï¼‰
   - æ”¯æŒå¤šç§æ¨¡å‹å‚æ•°é…ç½®
   - æä¾›å·¥å…·æ·»åŠ å’Œè§£æåŠŸèƒ½
   - æ”¯æŒæ–‡æœ¬ç”Ÿæˆå’Œå·¥å…·è°ƒç”¨è§£æ

4. **ContextMemory** - ä¸Šä¸‹æ–‡è®°å¿†ï¼ˆå®Œå…¨å¯¹åº”Pythonçš„ContextMemoryï¼‰
   - æ”¯æŒè®°å¿†æ¡ç›®çš„å¢åˆ æ”¹æŸ¥
   - æä¾›è®°å¿†æœç´¢å’Œä¸Šä¸‹æ–‡è·å–
   - æ”¯æŒè®°å¿†ç´¢å¼•ç®¡ç†

5. **UserManager** - ç”¨æˆ·ç®¡ç†ï¼ˆå®Œå…¨å¯¹åº”Pythonçš„UserManagerï¼‰
   - æ”¯æŒå¤šç”¨æˆ·è®°å¿†åº“ç®¡ç†
   - æä¾›ç”¨æˆ·åˆ‡æ¢å’Œè®°å¿†æŒä¹…åŒ–
   - æ”¯æŒè‡ªåŠ¨ç”¨æˆ·åˆ›å»º

6. **SecretaryAgent** - æ•™ç§˜Agent
   - è´Ÿè´£åˆ¶å®šæ•™å­¦è®¡åˆ’ï¼ˆæ ¸å¿ƒèƒ½åŠ›ï¼Œé€šè¿‡LLMç›´æ¥å®Œæˆï¼‰
   - ä½¿ç”¨KnowledgeBaseToolæ£€ç´¢æ•™å­¦å¤§çº²
   - åˆ†æå­¦ç”Ÿå­¦ä¹ è¿›åº¦ï¼Œç”Ÿæˆä¸ªæ€§åŒ–æ•™å­¦è®¡åˆ’

## æ–‡ä»¶ç»“æ„

```
app/src/main/java/com/aiteacher/ai/
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ BaseAgent.kt              # å®Œå…¨é‡æ„çš„åŸºç¡€Agentç±»
â”‚   â”œâ”€â”€ SecretaryAgent.kt         # é‡æ„åçš„æ•™ç§˜Agentï¼ˆä½¿ç”¨çŸ¥è¯†åº“å·¥å…·ï¼‰
â”‚   â””â”€â”€ SecretaryAgentTest.kt     # æ•™ç§˜Agentæµ‹è¯•æ–‡ä»¶
â””â”€â”€ service/
    â””â”€â”€ LLMService.kt          # LLMæœåŠ¡æ¥å£å’Œå®ç°
```

## ä½¿ç”¨æ–¹å¼

### 1. åˆ›å»ºAgentå®ä¾‹

```kotlin
val secretaryAgent = SecretaryAgent()
```

### 2. åˆ¶å®šæ•™å­¦è®¡åˆ’ï¼ˆAgentæ ¸å¿ƒèƒ½åŠ›ï¼‰

```kotlin
val result = secretaryAgent.createTeachingPlan(
    studentId = "student_001",
    grade = 7,
    currentChapter = "ç¬¬ä¸€ç«  æœ‰ç†æ•°",
    learningProgress = learningProgress
)

if (result.isSuccess) {
    val plan = result.getOrNull()
    // ä½¿ç”¨æ•™å­¦è®¡åˆ’
}
```

### 3. ä½¿ç”¨çŸ¥è¯†åº“å·¥å…·

```kotlin
// æ£€ç´¢æ•™å­¦å¤§çº²
val syllabus = secretaryAgent.callTool("knowledge_base", mapOf(
    "type" to "syllabus",
    "grade" to 7,
    "subject" to "æ•°å­¦"
))

// æœç´¢çŸ¥è¯†ç‚¹
val knowledgePoints = secretaryAgent.callTool("knowledge_base", mapOf(
    "type" to "knowledge_point",
    "grade" to 7,
    "keyword" to "æœ‰ç†æ•°"
))
```

### 4. å•æ¬¡è¿è¡Œ

```kotlin
val response = secretaryAgent.runOnce("è¯·ä½¿ç”¨knowledge_baseå·¥å…·æ£€ç´¢æ•™å­¦å¤§çº²ï¼Œç„¶ååˆ¶å®šæ•™å­¦è®¡åˆ’")
```

## ç•Œé¢é›†æˆ

### æ•™å­¦å¤§çº²ç•Œé¢

æ–°å¢äº†`TeachingOutlineScreen`ç•Œé¢ï¼Œç”¨äºæ˜¾ç¤ºAIç”Ÿæˆçš„æ•™å­¦å¤§çº²ï¼š

- **åŠ è½½çŠ¶æ€**: æ˜¾ç¤º"æ­£åœ¨ç”Ÿæˆæœ¬èŠ‚è¯¾æ•™å­¦å¤§çº²..."
- **é”™è¯¯å¤„ç†**: æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å’Œé‡è¯•æŒ‰é’®
- **è®¡åˆ’å±•ç¤º**: æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯ã€å¤ä¹ çŸ¥è¯†ç‚¹ã€æ–°å­¦çŸ¥è¯†ç‚¹
- **æ“ä½œæŒ‰é’®**: å¼€å§‹å­¦ä¹ ã€è¿”å›ä¸»é¡µ

### å¯¼èˆªæµç¨‹

```
ä¸»é¡µ â†’ æ•™å­¦å¤§çº²ç•Œé¢ â†’ å­¦ä¹ ç•Œé¢
```

## ä¸Pythonç‰ˆæœ¬çš„å¯¹æ¯”

| åŠŸèƒ½ | Pythonç‰ˆæœ¬ | Kotlinç‰ˆæœ¬ | å¯¹åº”å…³ç³» |
|------|------------|------------|----------|
| base_agentç±» | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| base_toolç±» | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| llm_modelç±» | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| ContextMemoryç±» | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| UserManagerç±» | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| run_onceæ–¹æ³• | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| run_loopæ–¹æ³• | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| å·¥å…·è°ƒç”¨æœºåˆ¶ | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| è®°å¿†ç®¡ç†æœºåˆ¶ | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| æ•™ç§˜Agent | âœ… | âœ… | å®Œå…¨å¯¹åº” |
| æ•™å­¦Agent | âœ… | ğŸ”„ å¾…å®ç° |
| æ£€éªŒAgent | âœ… | ğŸ”„ å¾…å®ç° |
| å®¶é•¿Agent | âœ… | ğŸ”„ å¾…å®ç° |

## æ‰©å±•è®¡åˆ’

1. **å®ç°å…¶ä»–Agent**
   - TeachingAgent - æ•™å­¦Agent
   - TestingAgent - æ£€éªŒAgent
   - ParentAgent - å®¶é•¿Agent

2. **é›†æˆçœŸå®LLMæœåŠ¡**
   - æ›¿æ¢MockLLMService
   - é›†æˆQwen APIæˆ–å…¶ä»–LLMæœåŠ¡

3. **å¢å¼ºå·¥å…·ç³»ç»Ÿ**
   - å®ç°æ›´å¤šæ•™å­¦å·¥å…·
   - æ”¯æŒå›¾ç‰‡è¯†åˆ«å’Œæ‰¹æ”¹

4. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ æ›´å¤šåŠ è½½åŠ¨ç”»
   - æ”¹è¿›é”™è¯¯å¤„ç†
   - æ”¯æŒç¦»çº¿æ¨¡å¼

## æµ‹è¯•

è¿è¡Œ`SecretaryAgentTest.kt`å¯ä»¥æµ‹è¯•é‡æ„åçš„æ•™ç§˜Agentï¼š

```kotlin
// æµ‹è¯•åˆ¶å®šæ•™å­¦è®¡åˆ’ï¼ˆAgentæ ¸å¿ƒèƒ½åŠ›ï¼‰
val result = secretaryAgent.createTeachingPlan(...)

// æµ‹è¯•çŸ¥è¯†åº“å·¥å…·è°ƒç”¨
val syllabus = secretaryAgent.callTool("knowledge_base", parameters)

// æµ‹è¯•çŸ¥è¯†ç‚¹æœç´¢
val searchResult = secretaryAgent.callTool("knowledge_base", searchParams)
```

## æ³¨æ„äº‹é¡¹

1. **åˆ¶å®šæ•™å­¦è®¡åˆ’æ˜¯Agentçš„æ ¸å¿ƒèƒ½åŠ›**ï¼Œä¸æ˜¯å·¥å…·ï¼Œé€šè¿‡LLMç›´æ¥å®Œæˆ
2. **KnowledgeBaseTool**ç”¨äºæ£€ç´¢æ•™å­¦å¤§çº²å’ŒçŸ¥è¯†ç‚¹ä¿¡æ¯
3. å½“å‰ä½¿ç”¨æ¨¡æ‹ŸLLMå“åº”ï¼Œéœ€è¦åç»­é›†æˆçœŸå®çš„LLM API
4. å·¥å…·è°ƒç”¨è§£æåŠŸèƒ½éœ€è¦è¿›ä¸€æ­¥å®Œå–„
5. çŸ¥è¯†åº“å†…å®¹åŸºäºåˆä¸­æ•°å­¦å¤§çº².mdæ–‡æ¡£

## ä¸‹ä¸€æ­¥

1. å®ç°TeachingAgentå’ŒTestingAgent
2. é›†æˆçœŸå®çš„LLMæœåŠ¡
3. å®Œå–„å·¥å…·è°ƒç”¨è§£æ
4. æ·»åŠ æ›´å¤šæµ‹è¯•ç”¨ä¾‹
5. ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
