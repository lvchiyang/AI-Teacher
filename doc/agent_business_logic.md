# AI教师系统Agent业务逻辑图（优化版）

## 整体架构总览

### 1. 核心教学流程

```mermaid
flowchart TD
    %% 核心教学流程
    A[教秘Agent<br/>教学计划把控] --> B[教学Agent<br/>细化章节内容]
    B --> C[检验Agent<br/>出题检验]
    C --> A
    
    %% 教秘Agent核心功能
    A --> D[教学大纲知识库]
    A --> E[章节进度决策]
    A --> F[向家长实时报告-付费]
    
    %% 教学Agent核心功能
    B --> G[制定教学任务]
    B --> H[制作PPT/文字内容]
    B --> I[语音交互教学]
    B --> J[例题讲解]
    B --> K[复习计划设计]
    B --> L[学生不响应检测]
    L --> M[多次询问仍无回答]
    M --> N[向家长推送通知-付费]
    
    %% 检验Agent核心功能
    C --> O[图片识别作答]
    C --> P[错题记录分析]
    C --> Q[语音讲解思路]
    C --> R[知识点总结]
    C --> S[优秀题库]
    
    %% 样式定义
    classDef coreAgent fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    
    class A,B,C coreAgent
```

### 2. 学生动力系统

```mermaid
flowchart TD
    %% 学生动力系统
    A[学生动力系统] --> B[及时反馈系统]
    A --> C[成就系统]
    A --> D[故事系统]
    A --> E[社交系统]
    B --> F["掌握知识点反馈: 你刚刚用'分配律'打败了这个题!"]
    C --> G[大数学家称号进度]
    C --> H[集卡系统]
    D --> I[题目题干故事化设计]
    E --> J[学习海报生成]
    J --> K[家长反馈引导-付费]
    
    %% 样式定义
    classDef supportSystem fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    
    class A,B,C,D,E supportSystem
```

### 3. 商业模式

```mermaid
flowchart TD
    %% 商业模式
    A[商业模式] --> B[内购服务]
    A --> C[增值服务]
    B --> D[更好解法提供]
    C --> E[实时推送学习进度-付费]
    
    %% 样式定义
    classDef businessModel fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    
    class A,B,C businessModel
```

## Agent职责分工

| Agent名称 | 主要职责 | 输入数据 | 输出数据 | 协作对象 |
|-----------|----------|----------|----------|----------|
| **教秘Agent** | 整体教学计划把控、章节进度决策、向家长实时报告 | 教学大纲、教学计划时间、学生学习情况 | 章节进度决策、家长学习进度报告 | 教学、检验 |
| **教学Agent** | 细化章节内容、制定教学任务、交互式教学、例题讲解 | 教学大纲、学生掌握情况 | PPT/文字内容、语音交互、教学反馈 | 教秘、检验 |
| **检验Agent** | 出题检验、图片识别作答、错题分析、知识点总结 | 教学结果、学生作答过程 | 学习报告、错题记录、知识点掌握情况 | 教学、教秘 |

## 1. 教秘Agent（教学计划把控）

```mermaid
flowchart TD
    A[教秘Agent启动] --> B[获取教学大纲知识库]
    B --> C[接收教学计划时间]
    C --> D[接收学生学习情况反馈]
    D --> E[综合分析学习进度]
    E --> F{章节进度决策}
    F -->|正常| G[维持当前章节进度]
    F -->|超前| H[增加拓展内容]
    F -->|滞后| I[调整教学策略]
    G --> J[向教学Agent发送教学指令]
    H --> J
    I --> J
    J --> K[实时向家长报告学习进度-付费]
    K --> L[等待下一轮评估周期]
    L --> D
```

## 2. 教学Agent（细化章节内容）

```mermaid
flowchart TD
    A[教学Agent接收指令] --> B[查看学生之前学习掌握情况]
    B --> C[依照遗忘规律设计复习计划]
    C --> D[制定具体教学任务]
    D --> E[制作PPT/文字教学内容]
    E --> F[启动交互式复习]
    F --> G{学生是否参与回答?}
    G -->|是| H[继续教学流程]
    G -->|否| I[多次询问]
    I --> J{仍无回答?}
    J -->|是| K[向家长推送通知-付费]
    J -->|否| H
    H --> L[语音交互教学]
    L --> M[例题讲解]
    M --> N[学生练习环节]
    N --> O[实时收集学生反馈]
    O --> P[调查学生掌握情况]
    P --> Q[向检验Agent发送检验指令]
    Q --> R[向教秘Agent报告教学结果]
```

## 3. 检验Agent（出题检验）

```mermaid
flowchart TD
    A[检验Agent接收指令] --> B[分析本节课知识点]
    B --> C[查看历史错题和掌握情况]
    C --> D[从优秀题库生成题目]
    D --> E[学生开始作答]
    E --> F[图片识别学生作答过程]
    F --> G[分析答案正确性]
    G --> H{答案是否正确?}
    H -->|正确| I[记录掌握情况]
    H -->|错误| J[记录错题]
    J --> K[语音讲解解题思路]
    K --> L[提供解题技巧]
    L --> M[付费版-提供更好解法]
    I --> N[总结知识点掌握情况]
    M --> N
    N --> O[生成学习报告]
    O --> P[向教秘Agent反馈结果]
    P --> Q[准备下一轮检验]
```

## 4. 整体系统协作流程（简化版）

```mermaid
flowchart TD
    A[系统启动] --> B[教秘Agent制定教学计划]
    B --> C[教学Agent执行教学]
    C --> D[检验Agent进行检验]
    D --> E[教秘Agent分析结果]
    E --> F{系统运行状态}
    F -->|正常| G[继续下一轮教学]
    F -->|异常| H[启动异常处理]
    H --> I[各Agent协调处理]
    I --> G
    G --> B
    
    J[学生端] --> K[学习互动]
    K --> L[获得个性化反馈]
    L --> M[成就系统激励]
    M --> N[社交分享]
    
    O[家长端] --> P[接收学习报告]
    P --> Q[参与学习监督]
    Q --> R[提供反馈意见]
    R --> E
```

## 5. 学生动力系统（简化版）

```mermaid
flowchart TD
    A[学生开始学习] --> B[教学Agent监控状态]
    B --> C[实时情绪检测]
    C --> D[个性化激励触发]
    D --> E[及时反馈系统]
    E --> F["游戏化反馈: 你刚刚用'分配律'打败了这个题!"]
    F --> G[成就系统更新]
    G --> H[大数学家称号进度]
    H --> I[集卡系统奖励]
    I --> J[故事化学习内容]
    J --> K[题目融入故事情节]
    K --> L[社交系统激活]
    L --> M[生成学习海报]
    M --> N[教秘Agent推送家长-付费]
    N --> O[家长正确反馈]
    O --> P[学生获得成就感]
    P --> Q[学习动力提升]
    Q --> R[学习效果改善]
    R --> S[检验Agent记录]
    S --> T[优化激励策略]
    T --> A
```

## 6. 教学流程监控机制（简化版）

```mermaid
flowchart TD
    A[异常检测] --> B{异常类型}
    B -->|学生不响应| C[教学Agent调整策略]
    B -->|学习效果差| D[教秘Agent调整计划]
    B -->|家长投诉| E[教秘Agent处理沟通-付费]
    C --> F[增加趣味元素]
    F --> G[降低难度]
    G --> H[发送激励消息]
    D --> I[调整教学方法]
    I --> J[增加练习环节]
    E --> K[沟通解释]
    K --> L[改进措施]
    H --> M[监控效果]
    J --> M
    L --> M
    M --> N{问题是否解决?}
    N -->|是| O[恢复正常流程]
    N -->|否| P[升级处理]
    P --> Q[人工干预]
```
